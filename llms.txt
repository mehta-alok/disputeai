# DisputeAI

> AI-Powered Hotel Chargeback Defense Platform. Protects hotel revenue through intelligent fraud detection, automated evidence collection, and AI-driven dispute management.

DisputeAI is a full-stack SaaS platform purpose-built for the hospitality industry. It automates the chargeback representment process by collecting PMS evidence, analyzing fraud signals with AI, and managing disputes across 68 payment and hotel system integrations.

## Core Capabilities

- Chargeback case management with AI-powered fraud scoring (0-100% confidence)
- Automated evidence collection from Property Management Systems (7 evidence types)
- Arbitration workflow for lost cases (filing, document upload, deadline tracking)
- 30 PMS integrations with two-way reservation sync
- 29 dispute processor adapters with portal sign-in and two-way sync (Visa VROL, Mastercom, Ethoca, Verifi, Stripe, Chase, Fiserv, etc.)
- 9 OTA integrations (Booking.com, Expedia, Airbnb, Hotels.com, TripAdvisor, VRBO, Agoda, Priceline, Hotel Engine)
- 8 autonomous AI agents for fraud analysis, evidence processing, security scanning
- Role-based access control (Admin, Manager, Staff) with property-level isolation
- Real-time dashboard with KPIs, analytics, and trend reporting
- Interactive tutorial system and AI-powered ChatHelp assistant
- Demo mode that operates fully without database or Redis

## Tech Stack

- Backend: Node.js 20 LTS, Express 4.18, Prisma ORM, PostgreSQL, Redis, BullMQ
- Frontend: React 18, Vite 5, Tailwind CSS 3.4, React Router 6, Recharts, Lucide React
- AI Providers: OpenAI, Anthropic, Ollama (configurable)
- Storage: AWS S3 for evidence, local filesystem fallback
- Infrastructure: Docker, Terraform (AWS), Vercel, Render/Railway

## Architecture

### Backend (Port 8000)

Entry point: `backend/server.js` with automatic demo mode detection.

API Route Groups:
- `/api/auth` - JWT authentication with refresh token rotation
- `/api/cases` - Chargeback case CRUD, status updates, AI analysis, arbitration filing, document upload
- `/api/evidence` - Evidence collection, upload, download from PMS
- `/api/analytics` - Dashboard metrics, trends, reports
- `/api/admin` - User management, system settings
- `/api/disputes` - Dispute processor connections
- `/api/notifications` - Real-time notification system
- `/api/pms` - PMS integration management
- `/api/reservations` - Reservation lookup, search, folio viewing, case linking
- `/api/sync` - PMS data synchronization triggers
- `/api/webhooks` - Payment processor webhooks (Stripe, Adyen, Shift4, Elavon)

Key Services:
- `services/aiAgents.js` - 8 autonomous AI agents
- `services/aiClient.js` - Multi-provider AI client (OpenAI/Anthropic/Ollama)
- `services/fraudDetection.js` - Weighted fraud scoring engine
- `services/autoclerkEmulator.js` - Built-in PMS emulator for demo
- `services/pmsIntegration.js` - 30 PMS adapter orchestration
- `services/disputeCompanies.js` - 29 dispute processor adapters
- `services/reservationMatcher.js` - Reservation-to-case matching

### Frontend (Port 3000)

Single-page React app with Vite dev server proxying `/api` to backend.

Pages (12):
- `Login.jsx` - Authentication with demo credentials
- `Dashboard.jsx` - Main KPI dashboard with charts
- `Cases.jsx` - Case list with status filters (Pending, In Review, Submitted, Won, Lost, Arbitration)
- `CaseDetail.jsx` - Full case view with resolution, arbitration (Overview/Documents tabs), timeline, notes, fraud indicators
- `Analytics.jsx` - Charts, trends, performance reports
- `Reservations.jsx` - PMS reservation search and management with global search
- `PMSIntegration.jsx` - PMS system connections (30 adapters) with portal sign-in, configure modal, and activity logs
- `DisputeIntegration.jsx` - Dispute processor management (29 adapters) with portal sign-in, configure modal, and two-way sync
- `OTAIntegration.jsx` - OTA channel connections (9 integrations) with portal sign-in, configure modal, and activity logs
- `Settings.jsx` - System configuration, AI thresholds, notification preferences
- `Tutorial.jsx` - Interactive 7-step onboarding walkthrough
- `Contact.jsx` - Contact form and support information

Components:
- `Layout.jsx` - Sidebar navigation, top bar, mobile bottom bar
- `ChatHelp.jsx` - AI-powered contextual help assistant (available on all pages)
- `NotificationPanel.jsx` - Real-time notification bell dropdown
- `ReservationViewer.jsx` - Reservation detail modal with folio viewer
- `GuestFolioViewer.jsx` - Guest folio display component
- `Tutorial.jsx` - Welcome modal and help button

## AI Fraud Detection

Weighted scoring model with three components:
- Reason Code Analysis (40%) - Historical win rates by dispute type
- Evidence Completeness (35%) - 7 evidence types: ID scan, authorization signature, checkout signature, guest folio, key card log, correspondence, CCTV footage
- Fraud Indicators (25%) - Positive signals (matching address, verified identity) and risk flags (no ID scan, no signature, first-time guest)

Score-based recommendations:
- 85-100%: AUTO_SUBMIT (submit defense immediately)
- 70-84%: REVIEW_RECOMMENDED (manual review)
- 50-69%: GATHER_MORE_EVIDENCE (missing documentation)
- 0-49%: UNLIKELY_TO_WIN (consider accepting loss)

## Arbitration Workflow

Lost cases may be eligible for arbitration (card network appeal):
- Filing with narrative explanation and supporting documents
- Document upload via drag-and-drop (PDF, DOC, images, spreadsheets)
- Deadline and filing fee tracking ($500 non-refundable)
- Status progression: AVAILABLE -> FILED -> card network binding decision

## PMS Integrations (30)

Enterprise: AutoClerk (built-in emulator), Oracle Opera Cloud, Mews, Cloudbeds, Agilysys, Infor, Stayntouch, RoomKey, Maestro, Hotelogix, RMS Cloud, Protel, eZee, SIHOT, innRoad
Boutique: Little Hotelier, Frontdesk Anywhere, WebRezPro, ThinkReservations, ResNexus, Guestline
Vacation Rental: Guesty, Hostaway, Lodgify, Escapia
Brand-Specific: Marriott GXP, Hilton OnQ, Hyatt Opera, IHG Concerto, Best Western BWR

## Dispute Processors (29)

All companies include portal sign-in links, API configuration modal, and two-way sync badges.

Prevention Networks: Verifi (Visa CDRN/RDR), Ethoca (Mastercard), Merlink
Hospitality Services: StaySettle, Win Chargebacks, Chargeback Gurus, ChargebackHelp, Clearview, CAVU, TailoredPay, Chargeblast, Chargebacks911, Midigator, Riskified
Card Network Portals: Visa VROL, Mastercom, AMEX Merchant, Discover Dispute
Merchant Processors: Chase Merchant, Stripe Disputes, Elavon, Fiserv, Global Payments, TSYS, Square, Authorize.net, Worldpay
Fraud Prevention: Kount, Signifyd

## Security

- JWT authentication with refresh token rotation and Redis-backed blacklisting
- bcrypt password hashing (12 salt rounds)
- Rate limiting: 100 req/15min general, 20 req/15min auth endpoints
- Webhook signature validation for all payment processors
- Helmet security headers, configurable CORS origins
- Role-based access control with property-level data isolation

## Demo Mode

Fully functional without PostgreSQL or Redis. Activated automatically when database is unavailable or via `DEMO_MODE=true`. Uses in-memory mock data with 9 demo cases, 12 reservations, and pre-configured integrations.

Demo credentials:
- Admin: admin@disputeai.com / DisputeAdmin123!
- Manager: manager@disputeai.com / DisputeManager123!
- Staff: staff@disputeai.com / DisputeStaff123!

## Quick Start

```
cd backend && npm install && cp .env.example .env && node server.js
cd frontend && npm install && npx vite --port 3000
```

Frontend: http://localhost:3000
Backend API: http://localhost:8000

## Deployment

Docker: `docker-compose up --build`
Development: `docker-compose -f docker-compose.dev.yml up`
Frontend: Vercel with included vercel.json
Backend: Dockerfile included for Render/Railway/any container platform

## License

MIT
